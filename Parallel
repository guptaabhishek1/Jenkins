import hudson.model.User
import groovy.json.JsonSlurper
import groovy.json.JsonOutput
pipeline 
{
  agent any
  stages {        
    stage('Serial') {
      when {
                expression { params.Enviroment == 'dev' }
      }
      steps{
        script{
          println "Serial Stage"
          Tst = "${env.AZ}".split("-")[1].toLowerCase().capitalize()
          echo "${Tst}"
          Tst1 = "${env.MultiAZ}".split("-")[1].toLowerCase().capitalize()
          echo "${Tst1}"
          
          durationInSeconds = (params.HoursToRun.toInteger() * 3600).toString()
          halfDurationInSeconds = (durationInSeconds.toInteger().div(2)).toString()
          echo "${halfDurationInSeconds}"
          echo "${durationInSeconds}"
        
        }
      }
    }
    stage('ParallelMultiAZ') {
      when {
            expression { params.Enviroment == 'qa' }
      }
      steps{
        parallel(
          "MultiAZ1": {
            script{
              println "Parallel Stage1"
            }
          },
          "MUltiAz2": {
            println "Parallel Stage2"
          },
      )
      }
    }
  }
}               
